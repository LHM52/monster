<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>몬스터 잡기</title>
    <link rel="stylesheet" href="style/style.css">
</head>

<body>
    <div id="container">
        <h1>몬스터 잡기 게임을 시작합니다!</h1>
    </div>
    <div class="game-container">
        <div class="game-screen">
            <div class="sword swing">
                <img src="imgs/검.png" alt="">
            </div>
        </div>
        <div class="monster hit">
            <p>몬스터</p>
            <div class="monster-hp"></div>
        </div>
    </div>
    <div class="text-log"></div>



    <script>
        let monsterHP = 100;
const textLog = document.querySelector('.text-log');

let attackDamage = parseInt(prompt("1회 공격시 데미지는? (양의 정수)"));
let attackCount = 0;
let sword = document.querySelector('.sword');
let monster = document.querySelector('.monster');

// 충돌 체크 함수
function checkCollision(swordRect, monsterRect) {
    return (
        swordRect.left < monsterRect.right &&
        swordRect.right > monsterRect.left &&
        swordRect.top < monsterRect.bottom &&
        swordRect.bottom > monsterRect.top
    );
}

// 공격이 잘못 입력되었을 경우
if (attackDamage <= 0) {
    alert("데미지를 잘못 입력하여 게임을 취소합니다.");
} else {
    // sword의 위치를 처음부터 가져옴
    let swordRect = sword.getBoundingClientRect();
    let monsterRect = monster.getBoundingClientRect();

    // 공격 시작 시 충돌 체크
    if (checkCollision(swordRect, monsterRect)) {
        monsterHP -= attackDamage;
        if (monsterHP < 0) {
            monsterHP = 0;
        }
        attackCount += 1;

        const p = document.createElement('p');
        p.textContent = `몬스터를 ${attackCount}회 공격했다!`;
        textLog.append(p);

        const strong = document.createElement('strong');
        strong.textContent = `몬스터의 남은 HP는 ${monsterHP} 입니다.`;
        textLog.append(strong);

        // 몬스터 HP가 0 이하로 떨어지면 게임 종료
        if (monsterHP <= 0) {
            const h2 = document.createElement('h2');
            h2.textContent = "게임 클리어!";
            h2.style.color = 'orange';
            h2.title = "게임을 다시 시작하고 싶으면 새로고침하세요.";
            textLog.append(h2);
        }
    }

    // 충돌 체크 결과를 계속해서 콘솔에 출력
    console.log(checkCollision(swordRect, monsterRect));
}




    </script>
</body>

</html>